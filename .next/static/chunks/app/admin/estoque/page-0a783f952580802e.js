(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[999],{63:(e,t,a)=>{"use strict";var r=a(7260);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},269:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var r=a(5155),s=a(2115);function l(e){let{veiculo:t,lojaId:a}=e,[l,n]=(0,s.useTransition)(),[o,c]=(0,s.useState)(!!t.preco_promocional&&t.preco_promocional>0),[i,d]=(0,s.useState)(t.preco_promocional?t.preco_promocional.toString():""),[m,u]=(0,s.useState)(!1),x=new Date(t.created_at).toLocaleDateString("pt-BR"),p=async()=>{n(async()=>{let e=new FormData;e.append("id",t.id),o&&i?e.append("preco_promocional",i.replace(/\D/g,"")):e.append("preco_promocional",""),(await fetch("/api/admin/veiculos/promo",{method:"POST",body:e})).ok&&(u(!0),setTimeout(()=>u(!1),2e3))})};return(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between p-4 bg-zinc-900 border border-zinc-800 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex gap-4 items-start md:items-center",children:[(0,r.jsx)("div",{className:"w-24 h-24 md:h-16 shrink-0 bg-zinc-800 rounded flex items-center justify-center text-xs text-zinc-600 overflow-hidden",children:t.imagens&&t.imagens.length>0?(0,r.jsx)("img",{src:t.imagens[0],alt:t.modelo,className:"w-full h-full object-cover"}):(0,r.jsx)("span",{children:"Sem Foto"})}),(0,r.jsxs)("div",{className:"flex flex-col justify-between h-full py-1",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"font-bold text-base",children:[t.marca," ",t.modelo]}),(0,r.jsxs)("div",{className:"text-zinc-400 text-xs flex gap-3 mt-1",children:[(0,r.jsxs)("span",{children:[t.ano_fabricacao,"/",t.ano_modelo]}),(0,r.jsx)("span",{children:"â€¢"}),(0,r.jsxs)("span",{children:[t.quilometragem," km"]})]})]}),(0,r.jsxs)("div",{className:"text-xs text-zinc-500 mt-2 font-medium bg-zinc-950/50 inline-block px-2 py-1 rounded w-fit border border-zinc-800/50",children:["Anunciado desde: ",x]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col md:items-end justify-between border-t border-zinc-800 md:border-0 pt-4 md:pt-0 gap-3 md:gap-0 mt-2 md:mt-0",children:[(0,r.jsxs)("div",{className:"flex flex-col md:items-end gap-2 w-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between md:justify-end gap-4 w-full",children:[(0,r.jsx)("div",{className:"text-right",children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"text-zinc-500 text-xs line-through",children:["R$ ",Number(t.preco).toLocaleString("pt-BR")]}),(0,r.jsxs)("div",{className:"text-emerald-500 font-bold text-lg leading-tight",children:["R$ ",i?Number(i).toLocaleString("pt-BR"):"..."]}),(0,r.jsx)("span",{className:"text-[10px] uppercase tracking-wider text-emerald-600/50 bg-emerald-950/30 px-1 rounded inline-block",children:"OFERTA"})]}):(0,r.jsxs)("div",{className:"text-zinc-300 font-bold text-lg",children:["R$ ",Number(t.preco).toLocaleString("pt-BR")]})}),(0,r.jsx)("div",{className:"flex items-center gap-2 bg-zinc-950 p-1.5 rounded-md border border-zinc-800",children:(0,r.jsxs)("label",{className:"text-xs text-zinc-400 font-medium cursor-pointer flex items-center gap-1.5",children:[(0,r.jsx)("input",{type:"checkbox",className:"accent-emerald-500",checked:o,onChange:e=>{let a=e.target.checked;c(a),a||(d(""),n(async()=>{let e=new FormData;e.append("id",t.id),e.append("preco_promocional",""),(await fetch("/api/admin/veiculos/promo",{method:"POST",body:e})).ok&&(u(!0),setTimeout(()=>u(!1),2e3))}))}}),"PROMO\xc7\xc3O"]})})]}),!o&&m&&(0,r.jsx)("div",{className:"text-[10px] text-emerald-500 font-bold animate-pulse mt-1",children:"PROMO\xc7\xc3O REMOVIDA COM SUCESSO!"}),o&&(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2 w-full md:w-auto bg-zinc-950 p-2 rounded border border-emerald-900/30",children:[(0,r.jsx)("span",{className:"text-zinc-500 text-sm pl-2",children:"R$"}),(0,r.jsx)("input",{type:"number",value:i,onChange:e=>d(e.target.value),placeholder:"Novo pre\xe7o",className:"bg-transparent text-white w-24 outline-none text-sm font-bold placeholder:font-normal"}),(0,r.jsx)("button",{onClick:p,disabled:l,className:"px-3 py-1 text-xs font-bold rounded transition-colors ".concat(m?"bg-emerald-600 text-white":"bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30"),children:l?"...":m?"SALVO":"SALVAR"})]})]}),(0,r.jsxs)("form",{action:"/admin/actions/deleteVeiculo",method:"POST",className:"flex items-center justify-end gap-2 mt-4",children:[(0,r.jsx)("input",{type:"hidden",name:"id",value:t.id}),(0,r.jsx)("a",{href:"/admin/estoque/".concat(t.id),className:"text-zinc-500 hover:text-blue-400 transition-colors p-2 text-xs font-medium bg-zinc-800 rounded",children:"Editar"}),(0,r.jsx)("button",{type:"submit",className:"text-zinc-500 hover:text-red-400 transition-colors p-2 text-xs font-medium bg-zinc-800 rounded",children:"Excluir"})]})]})]})}},399:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(5155),s=a(2115),l=a(926);let n=(0,l.createServerReference)("409ccbd4f0f1595bb69d2c54089f31c1ebefe02254",l.callServer,void 0,l.findSourceMapURL,"fetchPlacaFipe"),o=(0,l.createServerReference)("40314d0d3de05ee75c59cb5ad6d53b93c67df37639",l.callServer,void 0,l.findSourceMapURL,"submitNovoVeiculo");function c(){let[e,t]=(0,s.useState)(!1),[a,l]=(0,s.useState)(!1),[c,i]=(0,s.useState)(""),[d,m]=(0,s.useState)(""),[u,x]=(0,s.useState)(""),[p,h]=(0,s.useState)(""),[b,f]=(0,s.useState)(""),[g,v]=(0,s.useState)(""),[j,N]=(0,s.useState)(""),[w,y]=(0,s.useState)(""),[S,z]=(0,s.useState)(""),[R,k]=(0,s.useState)(""),P=async e=>{if(e.preventDefault(),m(""),h(""),!c||c.length<7)return void m("Digite uma placa v\xe1lida.");t(!0);let a=await n(c);if(null==a?void 0:a.error){m(a.error),t(!1);return}let r=null==a?void 0:a.data;r&&(f(r.marca||""),v(r.modelo||""),N(r.anoFabricacao||""),y(r.anoModelo||""),r.preco_fipe&&r.preco_fipe>0&&z(r.preco_fipe.toString())),t(!1)},C=async e=>{e.preventDefault(),x(""),h(""),l(!0);let t=new FormData(e.currentTarget),a=await o(t);(null==a?void 0:a.error)?x(a.error):(null==a?void 0:a.success)&&(h("Ve\xedculo cadastrado com sucesso!"),i(""),f(""),v(""),N(""),y(""),z(""),k(""),e.target.reset()),l(!1)};return(0,r.jsxs)("div",{className:"bg-[#141414] border border-zinc-800 rounded-xl p-6 mb-12",children:[(0,r.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Cadastrar Novo Ve\xedculo"}),(0,r.jsxs)("div",{className:"mb-6 pb-6 border-b border-zinc-800",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-zinc-400 block mb-2",children:"Busca Inteligente por Placa"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{value:c,onChange:e=>i(e.target.value.toUpperCase().replace(/[^a-zA-Z0-9]/g,"")),maxLength:7,placeholder:"Placa (ex: ABC1234)",className:"rounded-md border border-zinc-700 bg-zinc-800 px-4 py-2 text-white placeholder-zinc-500 flex-1 max-w-[200px]"}),(0,r.jsx)("button",{onClick:P,disabled:e,className:"bg-emerald-600/20 text-emerald-500 border border-emerald-900/50 hover:bg-emerald-600/30 px-4 py-2 rounded-md font-bold transition-all disabled:opacity-50",children:e?"Buscando...":"Preencher Magicamente"})]}),d&&(0,r.jsx)("p",{className:"text-red-400 text-xs mt-2",children:d}),(0,r.jsx)("p",{className:"text-zinc-500 text-xs mt-2",children:"Puxa automaticamente dados e valor da tabela FIPE."})]}),(0,r.jsxs)("form",{onSubmit:C,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-zinc-400",children:"Marca"}),(0,r.jsx)("input",{required:!0,name:"marca",value:b,onChange:e=>f(e.target.value),placeholder:"Ex: Toyota",className:"w-full rounded-md border border-zinc-800 bg-zinc-900 px-3 py-2 text-white"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-zinc-400",children:"Modelo"}),(0,r.jsx)("input",{required:!0,name:"modelo",value:g,onChange:e=>v(e.target.value),placeholder:"Ex: Hilux SRX",className:"w-full rounded-md border border-zinc-800 bg-zinc-900 px-3 py-2 text-white"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-zinc-400",children:"Pre\xe7o (R$)"}),(0,r.jsx)("input",{required:!0,name:"preco",value:S,onChange:e=>z(e.target.value),type:"number",placeholder:"250000",className:"w-full rounded-md border border-zinc-800 bg-zinc-900 px-3 py-2 text-white"})]}),(0,r.jsxs)("div",{className:"space-y-1 hidden lg:block",children:[" "," "]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-zinc-400",children:"Ano Fabrica\xe7\xe3o"}),(0,r.jsx)("input",{required:!0,name:"ano_fabricacao",value:j,onChange:e=>N(e.target.value),type:"number",placeholder:"2023",className:"w-full rounded-md border border-zinc-800 bg-zinc-900 px-3 py-2 text-white"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-zinc-400",children:"Ano Modelo"}),(0,r.jsx)("input",{required:!0,name:"ano_modelo",value:w,onChange:e=>y(e.target.value),type:"number",placeholder:"2024",className:"w-full rounded-md border border-zinc-800 bg-zinc-900 px-3 py-2 text-white"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-zinc-400",children:"KM"}),(0,r.jsx)("input",{required:!0,name:"km",value:R,onChange:e=>k(e.target.value),type:"number",placeholder:"15000",className:"w-full rounded-md border border-zinc-800 bg-zinc-900 px-3 py-2 text-white"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-zinc-400",children:"Categoria"}),(0,r.jsxs)("select",{required:!0,name:"categoria",defaultValue:"Outros",className:"w-full rounded-md border border-zinc-800 bg-zinc-900 px-3 py-2 text-white",children:[(0,r.jsx)("option",{value:"Carros el\xe9tricos",children:"Carros el\xe9tricos"}),(0,r.jsx)("option",{value:"Hatches",children:"Hatches"}),(0,r.jsx)("option",{value:"Picapes",children:"Picapes"}),(0,r.jsx)("option",{value:"Sedans",children:"Sedans"}),(0,r.jsx)("option",{value:"SUVs",children:"SUVs"}),(0,r.jsx)("option",{value:"Outros",children:"Outros"})]})]}),(0,r.jsxs)("div",{className:"space-y-1 lg:col-span-2",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-zinc-400",children:"Fotos do Ve\xedculo (Selecione at\xe9 8 fotos)"}),(0,r.jsx)("input",{type:"file",name:"fotos",multiple:!0,accept:"image/*",className:"w-full rounded-md border border-zinc-800 bg-zinc-900 px-3 py-1.5 text-white file:mr-4 file:py-1 file:px-3 file:rounded file:border-0 file:bg-zinc-800 file:text-zinc-300 hover:file:bg-zinc-700 cursor-pointer text-sm"}),(0,r.jsx)("p",{className:"text-xs text-zinc-500 mt-1",children:"Voc\xea pode selecionar v\xe1rias fotos de uma vez segurando o CTRL ou arrastando."})]}),(0,r.jsxs)("div",{className:"md:col-span-2 lg:col-span-3 mt-4",children:[u&&(0,r.jsx)("div",{className:"p-3 mb-4 rounded bg-red-900/20 border border-red-900/50 text-red-500 font-medium text-sm",children:u}),p&&(0,r.jsx)("div",{className:"p-3 mb-4 rounded bg-emerald-900/20 border border-emerald-900/50 text-emerald-500 font-medium text-sm",children:p}),(0,r.jsx)("button",{disabled:a,className:"bg-emerald-600 hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium px-8 py-3 rounded-md transition-colors w-full md:w-auto",children:a?"Salvando...":"Salvar Ve\xedculo"})]})]})]})}},926:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{callServer:function(){return r.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return s.findSourceMapURL}});let r=a(1209),s=a(5153),l=a(7197)},4294:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(2115);let s=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:i="",children:d,iconNode:m,...u}=e;return(0,r.createElement)("svg",{ref:t,...l,width:n,height:n,stroke:a,strokeWidth:c?24*Number(o)/Number(n):o,className:s("lucide",i),...u},[...m.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:o,...c}=a;return(0,r.createElement)(n,{ref:l,iconNode:t,className:s("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),o),...c})});return a.displayName="".concat(e),a}},6615:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(4294).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7265:(e,t,a)=>{Promise.resolve().then(a.bind(a,7919)),Promise.resolve().then(a.bind(a,269)),Promise.resolve().then(a.bind(a,399))},7919:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(5155),s=a(63),l=a(2115);let n=(0,a(4294).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var o=a(6615);function c(e){let{categorias:t,counts:a,marcas:c,marcaCounts:i}=e,d=(0,s.useRouter)(),m=(0,s.usePathname)(),u=(0,s.useSearchParams)(),[x,p]=(0,l.useTransition)(),[h,b]=(0,l.useState)(u.get("q")||""),[f,g]=(0,l.useState)(u.get("cat")||""),[v,j]=(0,l.useState)(u.get("marca")||"");(0,l.useEffect)(()=>{b(u.get("q")||""),g(u.get("cat")||""),j(u.get("marca")||"")},[u]);let N=()=>{p(()=>{let e=new URLSearchParams;h&&e.set("q",h),f&&e.set("cat",f),v&&e.set("marca",v),d.push("".concat(m,"?").concat(e.toString()),{scroll:!1})})};return(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full max-w-2xl mb-6 relative",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500 w-5 h-5"}),(0,r.jsx)("input",{type:"text",value:h,onChange:e=>b(e.target.value),onKeyDown:e=>"Enter"===e.key&&N(),placeholder:"Placa, marca, modelo...",className:"w-full sm:w-[250px] bg-zinc-900 border border-zinc-800 rounded-lg pl-10 pr-10 py-2 text-white focus:outline-none focus:border-emerald-500 transition-colors"}),h&&(0,r.jsx)("button",{onClick:()=>{b("");let e=new URLSearchParams(u.toString());e.delete("q"),p(()=>{d.push("".concat(m,"?").concat(e.toString()),{scroll:!1})})},className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-500 hover:text-white",children:(0,r.jsx)(o.A,{size:16})})]}),(0,r.jsxs)("select",{value:f,onChange:e=>{g(e.target.value);let t=new URLSearchParams(u.toString());e.target.value?t.set("cat",e.target.value):t.delete("cat"),p(()=>{d.push("".concat(m,"?").concat(t.toString()),{scroll:!1})})},className:"bg-zinc-900 border border-zinc-800 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-emerald-500 transition-colors",children:[(0,r.jsx)("option",{value:"",children:"Todas Categorias"}),t.map(e=>(0,r.jsxs)("option",{value:e,children:[e," (",a[e]||0,")"]},e))]}),(0,r.jsxs)("select",{value:v,onChange:e=>{j(e.target.value);let t=new URLSearchParams(u.toString());e.target.value?t.set("marca",e.target.value):t.delete("marca"),p(()=>{d.push("".concat(m,"?").concat(t.toString()),{scroll:!1})})},className:"bg-zinc-900 border border-zinc-800 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-emerald-500 transition-colors",children:[(0,r.jsx)("option",{value:"",children:"Todas Marcas"}),c.map(e=>(0,r.jsxs)("option",{value:e,children:[e," (",i[e]||0,")"]},e))]}),(0,r.jsx)("button",{onClick:N,disabled:x,className:"bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded-lg border border-emerald-500 transition-colors flex items-center justify-center font-bold",children:x?"Buscando...":"Filtrar"})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=7265)),_N_E=e.O()}]);