(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93],{3263:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(4294).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},4294:(e,a,r)=>{"use strict";r.d(a,{A:()=>o});var s=r(2115);let t=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return a.filter((e,a,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===a).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,a)=>{let{color:r="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:m,...u}=e;return(0,s.createElement)("svg",{ref:a,...l,width:n,height:n,stroke:r,strokeWidth:i?24*Number(o)/Number(n):o,className:t("lucide",d),...u},[...m.map(e=>{let[a,r]=e;return(0,s.createElement)(a,r)}),...Array.isArray(c)?c:[c]])}),o=(e,a)=>{let r=(0,s.forwardRef)((r,l)=>{let{className:o,...i}=r;return(0,s.createElement)(n,{ref:l,iconNode:a,className:t("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),o),...i})});return r.displayName="".concat(e),r}},6337:(e,a,r)=>{"use strict";r.d(a,{default:()=>m});var s=r(5155),t=r(2115),l=r(6615),n=r(4294);let o=(0,n.A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),i=(0,n.A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var d=r(3263);function c(e){let{isOpen:a,onClose:r,lojaId:n,veiculoId:c,veiculoNome:m,corPrimaria:u}=e,[x,p]=(0,t.useState)(1),[h,g]=(0,t.useState)(!1),[b,y]=(0,t.useState)("idle"),[f,j]=(0,t.useState)(""),[v,N]=(0,t.useState)(null),[w,k]=(0,t.useState)({nome:"",whatsapp:"",email:"",cpf:"",data_nascimento:"",renda_mensal:"",valor_entrada:"",possui_cnh:"",concorda_termos:!1});if(!a)return null;let C=e=>{let{name:a,value:r,type:s,checked:t}=e.target;k(e=>({...e,[a]:"checkbox"===s?t:r}))},_=async e=>{if(e.preventDefault(),!w.nome||!w.whatsapp||!w.cpf)return void alert("Por favor, preencha nome, whatsapp e CPF para continuar.");g(!0),y("idle");try{let e=await fetch("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loja_id:n,veiculo_id:c,nome:w.nome,whatsapp:w.whatsapp,email:w.email,cpf:w.cpf})}),a=await e.json();if(!e.ok)throw Error(a.error||"Erro ao enviar dados iniciais");N(a.leadId),p(2)}catch(e){y("error"),j(e.message)}finally{g(!1)}},A=async e=>{if(e.preventDefault(),!w.concorda_termos)return void alert("Voc\xea precisa concordar com os termos para enviar a simula\xe7\xe3o.");g(!0),y("idle");try{let e=await fetch("/api/leads",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({lead_id:v,loja_id:n,veiculo_id:c,nome:w.nome,whatsapp:w.whatsapp,email:w.email,cpf:w.cpf,data_nascimento:w.data_nascimento,renda_mensal:w.renda_mensal,valor_entrada:w.valor_entrada,possui_cnh:"sim"===w.possui_cnh})}),a=await e.json();if(!e.ok)throw Error(a.error||"Erro ao atualizar simula\xe7\xe3o");y("success")}catch(e){y("error"),j(e.message)}finally{g(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6 bg-black/60 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-lg overflow-hidden shadow-2xl relative animate-in fade-in zoom-in-95 duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[(0,s.jsxs)("div",{className:"pr-8",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Simular Financiamento"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Para o ",(0,s.jsx)("span",{className:"font-semibold text-gray-700",children:m})]})]}),(0,s.jsx)("button",{onClick:r,className:"p-2 bg-gray-100 hover:bg-gray-200 text-gray-500 rounded-full transition-colors absolute right-4 top-4",children:(0,s.jsx)(l.A,{size:20})})]}),(0,s.jsx)("div",{className:"p-6",children:"success"===b?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(o,{size:32})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Ficha enviada!"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Sua solicita\xe7\xe3o de pr\xe9-an\xe1lise foi enviada com sucesso para a loja. Em breve um consultor entrar\xe1 em contato."}),(0,s.jsx)("button",{onClick:r,className:"w-full py-3 rounded-lg font-bold text-white transition-opacity hover:opacity-90",style:{backgroundColor:u},children:"Concluir"})]}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-8",children:[(0,s.jsx)("div",{className:"h-1.5 flex-1 rounded-full ".concat(x>=1?"bg-gray-800":"bg-gray-200")}),(0,s.jsx)("div",{className:"h-1.5 flex-1 rounded-full ".concat(x>=2?"bg-gray-800":"bg-gray-200")})]}),"error"===b&&(0,s.jsxs)("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg flex items-start gap-3 text-sm",children:[(0,s.jsx)(i,{size:18,className:"shrink-0 mt-0.5"}),(0,s.jsx)("p",{children:f})]}),(0,s.jsx)("div",{className:1===x?"block":"hidden",children:(0,s.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Insira seus dados b\xe1sicos e o vendedor entrar\xe1 em contato."}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo *"}),(0,s.jsx)("input",{required:!0,name:"nome",value:w.nome,onChange:C,placeholder:"Digite seu nome completo (conforme RG/CPF)",className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:ring-2 focus:ring-gray-200 outline-none transition-all"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"WhatsApp *"}),(0,s.jsx)("input",{required:!0,name:"whatsapp",value:w.whatsapp,onChange:C,placeholder:"(00) 00000-0000",className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:ring-2 focus:ring-gray-200 outline-none transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CPF *"}),(0,s.jsx)("input",{required:!0,name:"cpf",value:w.cpf,onChange:C,placeholder:"000.000.000-00",className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:ring-2 focus:ring-gray-200 outline-none transition-all"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail"}),(0,s.jsx)("input",{type:"email",name:"email",value:w.email,onChange:C,placeholder:"seu@email.com",className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:ring-2 focus:ring-gray-200 outline-none transition-all"})]}),(0,s.jsxs)("button",{type:"submit",disabled:h,className:"w-full mt-8 py-3.5 rounded-lg font-bold text-white flex items-center justify-center gap-2 transition-transform active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed",style:{backgroundColor:u},children:[h?"Enviando...":"Falar com Vendedor"," ",(0,s.jsx)(d.A,{size:18})]})]})}),(0,s.jsx)("div",{className:2===x?"block":"hidden",children:(0,s.jsxs)("form",{onSubmit:A,children:[(0,s.jsxs)("div",{className:"mb-6 p-4 bg-emerald-50 border border-emerald-100 rounded-lg",children:[(0,s.jsx)("p",{className:"text-emerald-800 font-medium text-sm",children:"âœ¨ Quase l\xe1! Seu interesse j\xe1 foi enviado ao vendedor."}),(0,s.jsx)("p",{className:"text-emerald-700 text-sm mt-1 leading-relaxed",children:"Quer agilizar a sua aprova\xe7\xe3o? Preencha os dados abaixo para uma pr\xe9-an\xe1lise de cr\xe9dito priorit\xe1ria."})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Nascimento *"}),(0,s.jsx)("input",{required:!0,type:"date",name:"data_nascimento",value:w.data_nascimento,onChange:C,className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 flex-1 focus:ring-2 focus:ring-gray-200 outline-none transition-all"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Renda Mensal Estimada *"}),(0,s.jsx)("input",{required:!0,name:"renda_mensal",value:w.renda_mensal,onChange:C,placeholder:"R$ 0,00",className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:ring-2 focus:ring-gray-200 outline-none transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor de Entrada *"}),(0,s.jsx)("input",{required:!0,name:"valor_entrada",value:w.valor_entrada,onChange:C,placeholder:"R$ 0,00",className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:ring-2 focus:ring-gray-200 outline-none transition-all"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Possui CNH? *"}),(0,s.jsxs)("select",{required:!0,name:"possui_cnh",value:w.possui_cnh,onChange:C,className:"w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 focus:ring-2 focus:ring-gray-200 outline-none transition-all",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Selecione uma op\xe7\xe3o"}),(0,s.jsx)("option",{value:"sim",children:"Sim, possuo CNH"}),(0,s.jsx)("option",{value:"nao",children:"N\xe3o possuo"})]})]}),(0,s.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mt-4",children:(0,s.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,s.jsx)("input",{required:!0,type:"checkbox",name:"concorda_termos",checked:w.concorda_termos,onChange:C,className:"mt-1 w-4 h-4 text-emerald-600 rounded border-gray-300 focus:ring-emerald-500 cursor-pointer"}),(0,s.jsx)("span",{className:"text-xs text-gray-600 leading-relaxed",children:"Autorizo o envio dos meus dados para a loja administradora e concordo com a pol\xedtica de privacidade. Os dados ser\xe3o utilizados exclusivamente para simula\xe7\xe3o e pr\xe9-an\xe1lise de cr\xe9dito."})]})})]}),(0,s.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row gap-3 mt-8",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{y("success")},className:"px-6 py-3.5 rounded-lg font-bold text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors text-sm",children:"Pular esta etapa"}),(0,s.jsx)("button",{type:"submit",disabled:h,className:"flex-1 py-3.5 rounded-lg font-bold text-white flex items-center justify-center gap-2 transition-transform active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed",style:{backgroundColor:u},children:h?"Enviando...":"Enviar para An\xe1lise"})]})]})})]})})]})})}function m(e){let{children:a,lojaId:r,veiculoId:l,veiculoNome:n,corPrimaria:o}=e,[i,d]=(0,t.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{onClick:()=>d(!0),className:"contents",children:a}),(0,s.jsx)(c,{isOpen:i,onClose:()=>d(!1),lojaId:r,veiculoId:l,veiculoNome:n,corPrimaria:o})]})}},6615:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(4294).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9574:(e,a,r)=>{Promise.resolve().then(r.t.bind(r,2619,23)),Promise.resolve().then(r.bind(r,6337))}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=9574)),_N_E=e.O()}]);